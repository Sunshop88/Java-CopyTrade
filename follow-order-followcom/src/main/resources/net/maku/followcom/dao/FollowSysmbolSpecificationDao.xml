<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="net.maku.followcom.dao.FollowSysmbolSpecificationDao">

    <select id="selectSpecification" parameterType="net.maku.followcom.query.FollowSysmbolSpecificationQuery"
            resultType="net.maku.followcom.vo.FollowSysmbolSpecificationVO">
        SELECT
        fs.*,
        ft.platform_id,
        fp.broker_name,
        fp.platform_type
        FROM
        follow_sysmbol_specification fs
        JOIN
        follow_trader ft ON fs.trader_id = ft.id
        JOIN
        follow_platform fp ON ft.platform_id = fp.id
        WHERE
        1=1
        <if test="brokerName != null and brokerName != ''">
            AND fp.broker_name = #{brokerName}
        </if>
        <if test="serverName != null and serverName != ''">
            AND fs.server_name = #{serverName}
        </if>
        <if test="platformType != null and platformType != ''">
            AND ft.platform_type = #{platformType}
        </if>
        <if test="symbol != null and symbol != ''">
            AND fs.symbol LIKE CONCAT('%', #{symbol}, '%')
        </if>
        <if test="account != null and account != ''">
            AND ft.account LIKE CONCAT('%', #{account}, '%')
        </if>
    </select>
</mapper>
